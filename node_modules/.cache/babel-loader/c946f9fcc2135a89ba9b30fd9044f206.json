{"ast":null,"code":"import _slicedToArray from \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/App.js\";\nimport React from 'react';\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport StartFP from \"./FundraisingProject/StartFP\";\nimport SelfProfile from \"./SelfProfile\";\nimport FundraisingProjects from \"./FundraisingProject/FundraisingProjects\";\nimport './App.css';\nimport { BrowserRouter, Route, Switch, Link, Redirect } from \"react-router-dom\";\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Moderation from \"./Moderation\";\nimport FundraisingProjectDetails from \"./FundraisingProject/FundraisingProjectDetails\";\nimport { useEffect, useState } from \"react\";\nimport Context from \"./context\";\n\nfunction App(props) {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loaded = _useState2[0],\n        isLoaded = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        currentUser = _useState4[0],\n        setCurrentUser = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isLoggedIn = _useState6[0],\n        setIsLoggedIn = _useState6[1];\n\n  function logOut() {\n    sessionStorage.removeItem(\"jwtToken\");\n    setIsLoggedIn(false);\n    props.history.push('/sign-in');\n  }\n\n  useEffect(() => {\n    loadCurrentUser();\n  }, []);\n\n  async function loadCurrentUser() {\n    await fetch(\"http://localhost:18080/user/selfProfile\", {\n      method: 'GET',\n      headers: new Headers({\n        \"Authorization\": sessionStorage.jwtToken\n      })\n    }).then(response => {\n      if (response.status == \"403\") {\n        setIsLoggedIn(false);\n        return undefined;\n      } else {\n        setIsLoggedIn(true);\n        return response.json();\n      }\n    }).then(data => {\n      setCurrentUser(data);\n    });\n    isLoaded(true);\n  }\n\n  if (loaded === false) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(Context.Provider, {\n    value: {\n      loadCurrentUser\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(BrowserRouter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-light fixed-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"navbar-brand\",\n    to: \"/sign-in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }, \"ConceptFunder\"), React.createElement(\"div\", {\n    className: \"collapse navbar-collapse\",\n    id: \"navbarTogglerDemo02\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"navbar-nav ml-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/fundraising-projects\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, \"Fundraising Projects\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/start-fundraising-project\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Start Fundraising Project\")), isLoggedIn && currentUser.role === \"ADMIN\" && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/moderate-fundraising-project\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, \"Moderation\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/self-profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"SelfProfile\")), !isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/sign-in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, \"Login\")), !isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }, \"Sign up\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    onClick: () => logOut(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96\n    },\n    __self: this\n  }, \"Log out\")))))), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/sign-in\",\n    component: Login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    component: Register,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/start-fundraising-project\",\n    component: StartFP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/moderate-fundraising-project\",\n    component: Moderation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/fundraising-projects\",\n    component: FundraisingProjects,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/self-profile\",\n    component: SelfProfile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/fundraising-project-details/:fpId\",\n    component: FundraisingProjectDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  })))));\n}\n\nexport default App;","map":{"version":3,"sources":["/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/App.js"],"names":["React","Login","Register","StartFP","SelfProfile","FundraisingProjects","BrowserRouter","Route","Switch","Link","Redirect","Moderation","FundraisingProjectDetails","useEffect","useState","Context","App","props","loaded","isLoaded","currentUser","setCurrentUser","isLoggedIn","setIsLoggedIn","logOut","sessionStorage","removeItem","history","push","loadCurrentUser","fetch","method","headers","Headers","jwtToken","then","response","status","undefined","json","data","role"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport StartFP from \"./FundraisingProject/StartFP\";\nimport SelfProfile from \"./SelfProfile\";\nimport FundraisingProjects from \"./FundraisingProject/FundraisingProjects\";\nimport './App.css';\nimport {BrowserRouter, Route, Switch, Link, Redirect} from \"react-router-dom\";\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Moderation from \"./Moderation\";\nimport FundraisingProjectDetails from \"./FundraisingProject/FundraisingProjectDetails\";\nimport {useEffect, useState} from \"react\";\nimport Context from \"./context\";\n\nfunction App(props) {\n    const [loaded, isLoaded] = useState(false);\n    const [currentUser, setCurrentUser] = useState();\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    function logOut() {\n        sessionStorage.removeItem(\"jwtToken\")\n        setIsLoggedIn(false);\n        props.history.push('/sign-in')\n    }\n\n    useEffect(() =>{\n        loadCurrentUser();\n    },[]);\n\n    async function loadCurrentUser() {\n        await fetch(`http://localhost:18080/user/selfProfile`,\n            {\n                method: 'GET',\n                headers: new Headers({\n                    \"Authorization\": sessionStorage.jwtToken\n                })\n            })\n            .then(response => {\n                if (response.status == \"403\") {\n                    setIsLoggedIn(false);\n                    return undefined;\n                } else {\n                    setIsLoggedIn(true);\n                    return response.json();\n                }\n            }).then(data => {\n                setCurrentUser(data);\n            });\n        isLoaded(true);\n    }\n\n    if (loaded === false) {\n        return <div></div>\n    }\n\n    return (\n        <Context.Provider value={{loadCurrentUser}}>\n            <BrowserRouter>\n                <div className=\"App\">\n                    <nav className=\"navbar navbar-expand-lg navbar-light fixed-top\">\n                        <div className=\"container\">\n                            <Link className=\"navbar-brand\" to={\"/sign-in\"}>ConceptFunder</Link>\n                            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n                                <ul className=\"navbar-nav ml-auto\">\n                                    <li className=\"nav-item\">\n                                        <Link className=\"nav-link\" to={\"/fundraising-projects\"}>Fundraising Projects</Link>\n                                    </li>\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/start-fundraising-project\"}>Start Fundraising Project</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn && currentUser.role === \"ADMIN\" &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\"\n                                                  to={\"/moderate-fundraising-project\"}>Moderation</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/self-profile\"}>SelfProfile</Link>\n                                        </li>\n                                    }\n                                    {!isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/sign-in\"}>Login</Link>\n                                        </li>\n                                    }\n                                    {!isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                        <Link className=\"nav-link\" to={\"/register\"}>Sign up</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" onClick={() => logOut()}>Log out</Link>\n                                        </li>\n                                    }\n                                </ul>\n                            </div>\n                        </div>\n                    </nav>\n\n                    <Switch>\n                        <Route path=\"/sign-in\" component={Login} />\n                        <Route path=\"/register\" component={Register} />\n                        <Route path=\"/start-fundraising-project\" component={StartFP} />\n                        <Route path=\"/moderate-fundraising-project\" component={Moderation} />\n                        <Route path=\"/fundraising-projects\" component={FundraisingProjects}></Route>\n                        <Route path=\"/self-profile\" component={SelfProfile} />\n                        <Route path=\"/fundraising-project-details/:fpId\" component={FundraisingProjectDetails}/>\n                    </Switch>\n                </div>\n            </BrowserRouter>\n        </Context.Provider>\n    );\n}\n\nexport default App\n"]},"metadata":{},"sourceType":"module"}