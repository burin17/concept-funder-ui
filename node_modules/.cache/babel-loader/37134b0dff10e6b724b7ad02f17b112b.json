{"ast":null,"code":"import _slicedToArray from \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/FundraisingProject/FundraisingProjects.js\";\nimport React, { useState, useEffect } from \"react\";\nimport FundraisingProject from \"./FundraisingProject\";\nimport '../fundraisingProjects.css';\nimport { add } from \"react-modal/lib/helpers/classList\";\nexport default function FundraisingProjects() {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        mounted = _useState2[0],\n        setMounted = _useState2[1];\n\n  const _useState3 = useState([]),\n        _useState4 = _slicedToArray(_useState3, 2),\n        fps = _useState4[0],\n        setFps = _useState4[1];\n\n  const _useState5 = useState(),\n        _useState6 = _slicedToArray(_useState5, 2),\n        currentUser = _useState6[0],\n        setCurrentUser = _useState6[1];\n\n  const _useState7 = useState(false),\n        _useState8 = _slicedToArray(_useState7, 2),\n        loaded = _useState8[0],\n        isLoaded = _useState8[1];\n\n  const _useState9 = useState([]),\n        _useState10 = _slicedToArray(_useState9, 2),\n        tags = _useState10[0],\n        setTags = _useState10[1];\n\n  function allVisibleFps() {\n    fetch(\"http://localhost:18080/fundraising-projects/visibleForUser\", {\n      method: 'GET',\n      headers: new Headers({\n        \"Authorization\": sessionStorage.jwtToken\n      })\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      setFps(data);\n    });\n  }\n\n  if (!mounted) {\n    allVisibleFps();\n  }\n\n  useEffect(() => {\n    setMounted(true);\n    loadCurrentUser();\n  }, []);\n\n  async function loadCurrentUser() {\n    await fetch(\"http://localhost:18080/user/selfProfile\", {\n      method: 'GET',\n      headers: new Headers({\n        \"Authorization\": sessionStorage.jwtToken\n      })\n    }).then(response => response.json()).then(data => {\n      setCurrentUser(data);\n    });\n    isLoaded(true);\n  }\n\n  function addTag(event) {\n    if (event.key === 'Enter') {\n      const tag = document.getElementById(\"tagInput\").value;\n      document.getElementById(\"tagInput\").value = '';\n      setTags([...tags, tag]);\n      document.getElementById(\"selectedTags\").innerHTML += \"<div class=\\\"tag\\\">#\".concat(tag, \"&nbsp</div>\");\n    }\n  }\n\n  function search() {\n    const ttlPiece = document.getElementById('titleInput').value;\n\n    if (ttlPiece !== '') {\n      fetch(\"http://localhost:18080/fundraising-projects/search/\" + ttlPiece + \"?tags=\" + tags, {\n        method: 'GET',\n        headers: new Headers({\n          \"Authorization\": sessionStorage.jwtToken\n        })\n      }).then(response => response.json()).then(data => {\n        setFps(data);\n      });\n    } else {\n      allVisibleFps();\n    }\n  }\n\n  function clear() {\n    setTags([]);\n    document.getElementById('titleInput').value = '';\n    allVisibleFps();\n  }\n\n  if (loaded === false) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    style: {\n      position: \"absolute\",\n      top: \"80px\",\n      width: \"93%\",\n      left: '80px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    id: \"titleInput\",\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Title\",\n    onChange: search,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    id: \"tagInput\",\n    type: \"text\",\n    className: \"form-control\",\n    placeholder: \"Tags\",\n    style: {\n      marginTop: \"5px\"\n    },\n    onKeyDown: addTag,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    type: \"button\",\n    className: \"btn btn-light btn-block\",\n    style: {\n      marginTop: \"5px\",\n      marginLeft: \"1640px\"\n    },\n    onClick: () => clear(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, \"Clear\")), React.createElement(\"div\", {\n    id: \"selectedTags\",\n    style: {\n      display: 'flex',\n      position: \"absolute\",\n      top: \"170px\",\n      left: '90px'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }), React.createElement(\"ul\", {\n    className: \"wrapper\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, fps !== undefined && fps !== [] && fps.map(fp => {\n    console.log(fp);\n    return React.createElement(FundraisingProject, {\n      fp: fp,\n      isModeration: false,\n      isSelfProfile: false,\n      isCurrentUser: fp.founder.id === currentUser.id,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    });\n  })));\n}","map":{"version":3,"sources":["/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/FundraisingProject/FundraisingProjects.js"],"names":["React","useState","useEffect","FundraisingProject","add","FundraisingProjects","mounted","setMounted","fps","setFps","currentUser","setCurrentUser","loaded","isLoaded","tags","setTags","allVisibleFps","fetch","method","headers","Headers","sessionStorage","jwtToken","then","response","json","data","console","log","loadCurrentUser","addTag","event","key","tag","document","getElementById","value","innerHTML","search","ttlPiece","clear","position","top","width","left","marginTop","marginLeft","display","undefined","map","fp","founder","id"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from \"react\";\nimport FundraisingProject from \"./FundraisingProject\";\nimport '../fundraisingProjects.css';\nimport {add} from \"react-modal/lib/helpers/classList\";\n\nexport default function FundraisingProjects() {\n    const [mounted, setMounted] = useState(false)\n    const [fps, setFps] = useState([]);\n    const [currentUser, setCurrentUser] = useState();\n    const [loaded, isLoaded] = useState(false);\n    const [tags, setTags] = useState([]);\n\n    function allVisibleFps() {\n        fetch(`http://localhost:18080/fundraising-projects/visibleForUser`, {\n            method: 'GET',\n            headers: new Headers({\n                \"Authorization\": sessionStorage.jwtToken\n            })\n        }).then(response => response.json())\n            .then(data => {\n                console.log(data);\n                setFps(data);\n            });\n    }\n\n    if(!mounted) {\n        allVisibleFps();\n    }\n\n    useEffect(() =>{\n        setMounted(true);\n        loadCurrentUser();\n    },[]);\n\n    async function loadCurrentUser() {\n        await fetch(`http://localhost:18080/user/selfProfile`,\n            {\n                method: 'GET',\n                headers: new Headers({\n                    \"Authorization\": sessionStorage.jwtToken\n                })\n            })\n            .then(response => response.json())\n            .then(data => {\n                setCurrentUser(data);\n            });\n        isLoaded(true);\n    }\n\n    function addTag(event) {\n        if (event.key === 'Enter') {\n            const tag = document.getElementById(\"tagInput\").value;\n            document.getElementById(\"tagInput\").value = '';\n            setTags([...tags, tag]);\n            document.getElementById(\"selectedTags\").innerHTML +=\n                `<div class=\"tag\">#${tag}&nbsp</div>`\n        }\n    }\n\n    function search() {\n        const ttlPiece = document.getElementById('titleInput').value;\n        if (ttlPiece !== '') {\n            fetch(`http://localhost:18080/fundraising-projects/search/` + ttlPiece + \"?tags=\" + tags, {\n                method: 'GET',\n                headers: new Headers({\n                    \"Authorization\": sessionStorage.jwtToken\n                })\n            }).then(response => response.json())\n                .then(data => {\n                    setFps(data);\n                });\n        } else {\n            allVisibleFps();\n        }\n    }\n\n    function clear() {\n        setTags([]);\n        document.getElementById('titleInput').value = '';\n        allVisibleFps();\n    }\n\n    if (loaded === false) {\n        return <div></div>\n    }\n\n    return (\n        <div>\n            <div style={{position: \"absolute\", top: \"80px\", width: \"93%\", left: '80px'}}>\n                <input id=\"titleInput\" type=\"text\" className=\"form-control\" placeholder=\"Title\" onChange={search}/>\n                <input id=\"tagInput\" type=\"text\" className=\"form-control\" placeholder=\"Tags\" style={{marginTop: \"5px\"}} onKeyDown={addTag}/>\n                <button type=\"button\" className=\"btn btn-light btn-block\" style={{marginTop: \"5px\", marginLeft: \"1640px\"}} onClick={() => clear()}>Clear</button>\n            </div>\n            <div id=\"selectedTags\" style={{display: 'flex', position: \"absolute\", top: \"170px\", left: '90px'}}>\n\n            </div>\n            <ul className=\"wrapper\">\n                {fps !== undefined && fps !== [] && fps.map(fp => {\n                    console.log(fp);\n                    return <FundraisingProject fp={fp} isModeration={false} isSelfProfile={false} isCurrentUser={fp.founder.id === currentUser.id}/>\n                })}\n            </ul>\n        </div>\n    );\n}"]},"metadata":{},"sourceType":"module"}