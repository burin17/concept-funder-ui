{"ast":null,"code":"import _slicedToArray from \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/App.js\";\nimport React from 'react';\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport CreateFP from \"./FundraisingProject/CreateFP\";\nimport SelfProfile from \"./SelfProfile\";\nimport FundraisingProjects from \"./FundraisingProject/FundraisingProjects\";\nimport './App.css';\nimport { BrowserRouter, Route, Switch, Link, useHistory, withRouter, Redirect } from \"react-router-dom\";\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Moderation from \"./Moderation\";\nimport FundraisingProjectDetails from \"./FundraisingProject/FundraisingProjectDetails\";\nimport { useEffect, useState } from \"react\";\nimport Context from \"./context\";\nimport Guide from \"./Guide\";\nimport Messenger from \"./Messenger\";\nimport ChatList from \"./ChatList\";\nimport StartedMessenger from \"./StartedMessenger\";\n\nfunction App() {\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        loaded = _useState2[0],\n        isLoaded = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        currentUser = _useState4[0],\n        setCurrentUser = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        isLoggedIn = _useState6[0],\n        setIsLoggedIn = _useState6[1];\n\n  function logOut() {\n    sessionStorage.removeItem(\"jwtToken\");\n    setIsLoggedIn(false);\n  }\n\n  useEffect(() => {\n    loadCurrentUser();\n  }, []);\n\n  function loadCurrentUser() {\n    fetch(\"http://localhost:18080/user/selfProfile\", {\n      method: 'GET',\n      headers: new Headers({\n        \"Authorization\": sessionStorage.jwtToken\n      })\n    }).then(response => {\n      if (response.status == \"403\") {\n        setIsLoggedIn(false);\n        return undefined;\n      } else {\n        return response.json();\n      }\n    }).then(data => {\n      setCurrentUser(data);\n\n      if (data !== undefined) {\n        setIsLoggedIn(true);\n      }\n    }).then(() => {\n      isLoaded(true);\n    });\n  }\n\n  if (loaded === false) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    });\n  }\n\n  return React.createElement(Context.Provider, {\n    value: {\n      loadCurrentUser\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63\n    },\n    __self: this\n  }, React.createElement(BrowserRouter, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"App\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"nav\", {\n    className: \"navbar navbar-expand-lg navbar-light fixed-top\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"navbar-brand\",\n    to: \"/sign-in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68\n    },\n    __self: this\n  }, \"ConceptFunder\"), React.createElement(\"div\", {\n    className: \"collapse navbar-collapse\",\n    id: \"navbarTogglerDemo02\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"navbar-nav ml-auto\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/fundraising-projects\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, \"Fundraising Projects\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/start-fundraising-project\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Start Fundraising Project\")), isLoggedIn && currentUser.role === \"ADMIN\" && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/moderate-fundraising-project\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Requests Moderation\")), isLoggedIn && currentUser.role === \"ADMIN\" && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/tech-support\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }, \"Needing Help\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/self-profile\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  }, \"SelfProfile\")), isLoggedIn && currentUser.role !== \"ADMIN\" && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/guide\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98\n    },\n    __self: this\n  }, \"How it works\")), !isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    to: \"/sign-in\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104\n    },\n    __self: this\n  }, \"Login\")), !isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108\n    },\n    __self: this\n  }, React.createElement(Link, {\n    id: \"signIn\",\n    className: \"nav-link\",\n    to: \"/register\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109\n    },\n    __self: this\n  }, \"Sign up\")), isLoggedIn && React.createElement(\"li\", {\n    className: \"nav-item\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113\n    },\n    __self: this\n  }, React.createElement(Link, {\n    className: \"nav-link\",\n    onClick: () => logOut(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114\n    },\n    __self: this\n  }, \"Log out\")))))), React.createElement(Switch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122\n    },\n    __self: this\n  }, React.createElement(Route, {\n    path: \"/sign-in\",\n    component: Login,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/register\",\n    component: Register,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/start-fundraising-project\",\n    component: CreateFP,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/moderate-fundraising-project\",\n    component: Moderation,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/fundraising-projects\",\n    component: FundraisingProjects,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/self-profile\",\n    component: SelfProfile,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/fundraising-project-details/:fpId\",\n    component: FundraisingProjectDetails,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/guide\",\n    component: Guide,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/messenger\",\n    component: Messenger,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/tech-support\",\n    component: ChatList,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(Route, {\n    path: \"/tech-support-messenger/:chatId\",\n    component: StartedMessenger,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: \"footer-copyright text-center py-3\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135\n    },\n    __self: this\n  }, \"\\xA9 2020 Copyright:\", React.createElement(Link, {\n    href: \"/\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }, \" Conce\")))));\n}\n\nexport default withRouter(App);","map":{"version":3,"sources":["/home/burin17/proj/diploma/concept-funder/concept-funder-ui/src/App.js"],"names":["React","Login","Register","CreateFP","SelfProfile","FundraisingProjects","BrowserRouter","Route","Switch","Link","useHistory","withRouter","Redirect","Moderation","FundraisingProjectDetails","useEffect","useState","Context","Guide","Messenger","ChatList","StartedMessenger","App","loaded","isLoaded","currentUser","setCurrentUser","isLoggedIn","setIsLoggedIn","logOut","sessionStorage","removeItem","loadCurrentUser","fetch","method","headers","Headers","jwtToken","then","response","status","undefined","json","data","role"],"mappings":"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","sourcesContent":["import React from 'react'\nimport Login from \"./Login\";\nimport Register from \"./Register\";\nimport CreateFP from \"./FundraisingProject/CreateFP\";\nimport SelfProfile from \"./SelfProfile\";\nimport FundraisingProjects from \"./FundraisingProject/FundraisingProjects\";\nimport './App.css';\nimport {BrowserRouter, Route, Switch, Link, useHistory, withRouter, Redirect} from \"react-router-dom\";\nimport '../node_modules/bootstrap/dist/css/bootstrap.min.css';\nimport Moderation from \"./Moderation\";\nimport FundraisingProjectDetails from \"./FundraisingProject/FundraisingProjectDetails\";\nimport {useEffect, useState} from \"react\";\nimport Context from \"./context\";\nimport Guide from \"./Guide\";\nimport Messenger from \"./Messenger\";\nimport ChatList from \"./ChatList\";\nimport StartedMessenger from \"./StartedMessenger\";\n\nfunction App() {\n    const [loaded, isLoaded] = useState(false);\n    const [currentUser, setCurrentUser] = useState();\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\n\n    function logOut() {\n        sessionStorage.removeItem(\"jwtToken\")\n        setIsLoggedIn(false);\n    }\n\n    useEffect(() =>{\n        loadCurrentUser();\n    },[]);\n\n     function loadCurrentUser() {\n         fetch(`http://localhost:18080/user/selfProfile`,\n            {\n                method: 'GET',\n                headers: new Headers({\n                    \"Authorization\": sessionStorage.jwtToken\n                })\n            })\n            .then(response => {\n                if (response.status == \"403\") {\n                    setIsLoggedIn(false);\n                    return undefined;\n                } else {\n                    return response.json();\n                }\n            }).then(data => {\n                setCurrentUser(data);\n                if (data !== undefined) {\n                    setIsLoggedIn(true);\n                }\n            }).then(() => {\n                isLoaded(true);\n            });\n    }\n\n    if (loaded === false) {\n        return <div></div>\n    }\n\n    return (\n        <Context.Provider value={{loadCurrentUser}}>\n            <BrowserRouter>\n                <div className=\"App\">\n                    <nav className=\"navbar navbar-expand-lg navbar-light fixed-top\">\n                        <div className=\"container\">\n                            <Link className=\"navbar-brand\" to={\"/sign-in\"}>ConceptFunder</Link>\n                            <div className=\"collapse navbar-collapse\" id=\"navbarTogglerDemo02\">\n                                <ul className=\"navbar-nav ml-auto\">\n                                    <li className=\"nav-item\">\n                                        <Link className=\"nav-link\" to={\"/fundraising-projects\"}>Fundraising Projects</Link>\n                                    </li>\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/start-fundraising-project\"}>Start Fundraising Project</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn && currentUser.role === \"ADMIN\" &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\"\n                                                  to={\"/moderate-fundraising-project\"}>Requests Moderation</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn && currentUser.role === \"ADMIN\" &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\"\n                                                  to={\"/tech-support\"}>Needing Help</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/self-profile\"}>SelfProfile</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn && currentUser.role !== \"ADMIN\" &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\"\n                                                  to={\"/guide\"}>How it works</Link>\n                                        </li>\n                                    }\n                                    {!isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" to={\"/sign-in\"}>Login</Link>\n                                        </li>\n                                    }\n                                    {!isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link id=\"signIn\" className=\"nav-link\" to={\"/register\"}>Sign up</Link>\n                                        </li>\n                                    }\n                                    {isLoggedIn &&\n                                        <li className=\"nav-item\">\n                                            <Link className=\"nav-link\" onClick={() => logOut()}>Log out</Link>\n                                        </li>\n                                    }\n                                </ul>\n                            </div>\n                        </div>\n                    </nav>\n\n                    <Switch>\n                        <Route path=\"/sign-in\" component={Login} />\n                        <Route path=\"/register\" component={Register} />\n                        <Route path=\"/start-fundraising-project\" component={CreateFP} />\n                        <Route path=\"/moderate-fundraising-project\" component={Moderation} />\n                        <Route path=\"/fundraising-projects\" component={FundraisingProjects}></Route>\n                        <Route path=\"/self-profile\" component={SelfProfile} />\n                        <Route path=\"/fundraising-project-details/:fpId\" component={FundraisingProjectDetails}/>\n                        <Route path=\"/guide\" component={Guide}/>\n                        <Route path=\"/messenger\" component={Messenger}/>\n                        <Route path=\"/tech-support\" component={ChatList}/>\n                        <Route path=\"/tech-support-messenger/:chatId\" component={StartedMessenger}/>\n                    </Switch>\n                    <div className=\"footer-copyright text-center py-3\">Â© 2020 Copyright:\n                        <Link href=\"/\"> Conce</Link>\n                    </div>\n                </div>\n            </BrowserRouter>\n        </Context.Provider>\n    );\n}\n\n\nexport default withRouter(App);\n"]},"metadata":{},"sourceType":"module"}